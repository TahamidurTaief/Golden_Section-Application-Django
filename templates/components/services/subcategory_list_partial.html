{% if show_all %}
<div class="form-check mb-1">
  <input class="form-check-input" type="radio" name="subcategory" value="all" id="subcat-all"
    {% if not selected_subcategories or 'all' in selected_subcategories %}checked{% endif %}
    hx-get="{% url 'core:services' %}?page=1"
    hx-trigger="change"
    hx-target="#services-row"
    hx-swap="outerHTML"
    hx-include="[name='keyword'], [name='category']:checked"
    hx-indicator="#loading-indicator">
  <label class="form-check-label small" for="subcat-all">All Sub Categories</label>
</div>
{% endif %}

{% for subcategory in subcategories %}
<div class="form-check mb-1 {% if forloop.counter > 5 %}subcategory-hidden{% endif %}" {% if forloop.counter > 5 %}style="display: none;"{% endif %}>
  <input class="form-check-input" type="checkbox" name="subcategory" value="{{ subcategory.slug }}" id="subcat-{{ subcategory.id }}"
    {% if selected_subcategories and subcategory.slug in selected_subcategories %}checked{% endif %}
    hx-get="{% url 'core:services' %}?page=1"
    hx-trigger="change"
    hx-target="#services-row"
    hx-swap="outerHTML"
    hx-include="[name='keyword'], [name='category']:checked, [name='subcategory']:checked"
    hx-indicator="#loading-indicator">
  <label class="form-check-label small" for="subcat-{{ subcategory.id }}">
    {{ subcategory.name }} <span class="text-muted">({{ subcategory.total_services }})</span>
  </label>
</div>
{% empty %}
<div class="text-muted small">No subcategories found</div>
{% endfor %}
